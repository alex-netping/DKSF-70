/*@{
defgroup TCN75A
* Модуль TCN75A реализует интерфейс обмена через I2C с микросхемами термодатчика TCN75A 
* портов ввода-вывода
*\autor 
*version 1.0
*\date 5.12.2007
*
*
*/

#include "platform_setup.h"
#ifndef  TCN75A_H
#define  TCN75A_H
///Версия модуля
#define  TCN75A_VER	1
///Сборка модуля
#define  TCN75A_BUILD	0
//------------- Проверка зависимостей
//  Если модуль зависим от других модулей проекта, то необходимо произвести 
//проверку наличия в проекте этих модулей и совместимости их версий с версией 
//текущего модуля. 

#ifndef  SW_I2C_MODUL
  #error "TCN75A: SW_I2C modul not defined!!!"
#else
  #if SW_I2C_VER<1
    #error "TCN75A: SW_I2C modul version <1!!!"
  #endif
#endif

//------------- Обработка ошибок ---------------------------------------------
//Базовый номер ошибок модуля
#define TCN75A_ERROR_BASE 100
//Кол-во определенных типов ошибок
#define TCN75A_ERR_NUM   1

//------------- Описание структуры модуля ------------------------------------
///Кол-во процедур инициализации
#define TCN75A_INITS	1
///Кол-во процедур исполняемых в главном цикле
#define TCN75A_EXECS	1
///Кол-во процедур исполняемых в таймере
#define TCN75A_TIMERS	1
///Структура описания модуля
extern const struct module_rec tcn75a_struct;  

//---------------- Раздел, где будут определяться константы модуля -------------------------
///Значения шагов алгоритма измерения температуры
#define TCN75A_INIT         1
#define TCN75A_INIT_WAIT    2
#define TCN75A_READ         3
#define TCN75A_READ_WAIT    4

//---------------- Раздел, где будут определяться структуры модуля -------------------------
//---------------- Раздел, где будут определяться глобальные переменные модуля -------------
///Счетчик таймаута
extern unsigned short tcn75a_timeout;
///Буфер хранения прочитанных температур
extern unsigned short tcn75a_temp[TCN75_DET_MAX];
///Счетчик шагов алгоритма измерения температуры
extern uword tcn75_step;
//---------------- Раздел, где будут определяться функции модуля ---------------------------

/*! Процедура начальной инициализации модуля
*/
extern void tcn75a_init(void);

/*! Процедура чтения температуры из микросхем TCN75A
*/
extern void tcn75a_exec(void);

/*! Процедура посчета таймаутов
*/
extern void tcn75a_timer(void);

#endif
//}@
